{"ast":null,"code":"var _jsxFileName = \"/Users/ashrafkhan/my-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst clientId = '367a1dd9d8fa4e7aac443fb3cd47e9fd'; // Replace with your Client ID\nconst clientSecret = '87d4c1ad132c440383be6992fb365c6c'; // Replace with your Client Secret\nconst redirectUri = \"http://localhost:3000/callback\"; // Replace with your redirect URI\nconst scopes = \"user-read-private user-read-email user-library-read\";\nconst SpotifySongSearch = () => {\n  _s();\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState('');\n  const [query, setQuery] = useState(\"taylor swift\");\n  const [songs, setSongs] = useState([]);\n\n  /* useEffect( ()=> {\n     const fetchAccessToken = async () => {\n       var url = 'https://accounts.spotify.com/api/token';\n       var options = {\n         method: 'POST',\n         headers: {\n           \"Content-Type\" : \"application/x-www-form-urlencoded\",\n         }, \n         body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n       }\n       \n       try {\n         const result = await fetch(url, options);\n         const data = await result.json();\n         setAccessToken(data.access_token);\n       } catch (error) {\n         console.error('Error fetching access token:', error);\n       }\n        \n     }\n    \n       \n      fetchAccessToken();\n   },[]);*/\n\n  const handleLogin = () => {\n    const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;\n    window.location.href = authUrl;\n  };\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n    if (code) {\n      fetchAccessToken(code);\n    }\n  }, []);\n  const fetchAccessToken = async code => {\n    try {\n      const response = await fetch(\"http://localhost:4000/spotify/token\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          code,\n          redirectUri\n        })\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n      setRefreshToken(data.refresh_token);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  const refreshAccessToken = async () => {\n    try {\n      const response = await fetch(\"https://localhost:4000/spotify/refresh\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          refreshToken\n        })\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  async function SearchSong() {\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=10`;\n    const authorizationSearch = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        // Fixed incorrect 'applications/json' to 'application/json'\n        \"Authorization\": `Bearer ${accessToken}` // Added a space after 'Bearer' and used template literals for clarity\n      }\n    };\n    try {\n      const res = await fetch(url, authorizationSearch);\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const data = await res.json(); // Awaited the response JSON parsing\n      setSongs(data.tracks.items);\n    } catch (error) {\n      console.error('Error fetching song:', error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogin,\n      children: \"Login to Spotify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Spotify Song Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: query,\n      onChange: e => setQuery(e.target.value),\n      placeholder: \"Search for a song\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: SearchSong,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: songs.map(song => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: song.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Artist: \", song.artists.map(artist => artist.name).join(\", \")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: song.external_urls.spotify,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Listen on Spotify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 13\n        }, this)]\n      }, song.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 125,\n    columnNumber: 5\n  }, this);\n};\n_s(SpotifySongSearch, \"ev9v7UW4y3n9LvqNT6UDpFnXTmc=\");\n_c = SpotifySongSearch;\nexport default SpotifySongSearch;\nvar _c;\n$RefreshReg$(_c, \"SpotifySongSearch\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","clientId","clientSecret","redirectUri","scopes","SpotifySongSearch","_s","accessToken","setAccessToken","refreshToken","setRefreshToken","query","setQuery","songs","setSongs","handleLogin","authUrl","encodeURIComponent","window","location","href","urlParams","URLSearchParams","search","code","get","fetchAccessToken","response","fetch","method","headers","body","JSON","stringify","data","json","access_token","refresh_token","error","console","log","refreshAccessToken","SearchSong","url","authorizationSearch","res","ok","Error","status","tracks","items","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","map","song","name","artists","artist","join","external_urls","spotify","rel","id","_c","$RefreshReg$"],"sources":["/Users/ashrafkhan/my-app/src/App.js"],"sourcesContent":["\n\n\nimport React, { useState, useEffect } from \"react\";\n\nconst clientId = '367a1dd9d8fa4e7aac443fb3cd47e9fd'; // Replace with your Client ID\nconst clientSecret = '87d4c1ad132c440383be6992fb365c6c';// Replace with your Client Secret\nconst redirectUri = \"http://localhost:3000/callback\"; // Replace with your redirect URI\nconst scopes = \"user-read-private user-read-email user-library-read\";\n\nconst SpotifySongSearch = () => {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState('');\n  const [query, setQuery] = useState(\"taylor swift\");\n  const [songs, setSongs] = useState([]);\n \n /* useEffect( ()=> {\n    const fetchAccessToken = async () => {\n      var url = 'https://accounts.spotify.com/api/token';\n      var options = {\n        method: 'POST',\n        headers: {\n          \"Content-Type\" : \"application/x-www-form-urlencoded\",\n        }, \n        body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n      }\n      \n      try {\n        const result = await fetch(url, options);\n        const data = await result.json();\n        setAccessToken(data.access_token);\n      } catch (error) {\n        console.error('Error fetching access token:', error);\n      }\n       \n    }\n   \n      \n\n    fetchAccessToken();\n  },[]);*/\n\n\n\n  const handleLogin = () => {\n    const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;\n    window.location.href = authUrl;\n  };\n\n\n  useEffect(()=> {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n\n    if(code) {\n      fetchAccessToken(code);\n    }\n\n  },[]);\n\n  const fetchAccessToken = async (code) => {\n   \n    try{\n      const response = await fetch(\"http://localhost:4000/spotify/token\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\",\n        },\n        body: JSON.stringify({ code, redirectUri }),\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n      setRefreshToken(data.refresh_token);\n    } catch(error) {\n      console.log(error);\n    }\n     \n  }\n\n  const refreshAccessToken = async () => {\n    try {\n      const response = await fetch(\"https://localhost:4000/spotify/refresh\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\" : \"application/json\",\n        },\n        body: JSON.stringify({refreshToken}),\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n    } catch(error) {\n      console.log(error);\n    }\n  }\n\n\n  async function SearchSong() {\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=10`;\n    \n  \n    const authorizationSearch = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json', // Fixed incorrect 'applications/json' to 'application/json'\n        \"Authorization\": `Bearer ${accessToken}` // Added a space after 'Bearer' and used template literals for clarity\n      }\n    };\n  \n    try {\n      const res = await fetch(url, authorizationSearch);\n  \n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n  \n      const data = await res.json(); // Awaited the response JSON parsing\n      setSongs(data.tracks.items); \n    } catch (error) {\n      console.error('Error fetching song:', error);\n    }\n\n    \n  }\n  return (\n    <div>\n      <button onClick={handleLogin}>Login to Spotify</button>\n      <h1>Spotify Song Search</h1>\n      <input\n        type=\"text\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Search for a song\"\n      />\n      <button onClick={SearchSong}>Search</button>\n\n      <ul>\n        {songs.map((song) => (\n          <li key={song.id}>\n            <p>{song.name}</p>\n            <p>Artist: {song.artists.map((artist) => artist.name).join(\", \")}</p>\n            <a href={song.external_urls.spotify} target=\"_blank\" rel=\"noopener noreferrer\">\n              Listen on Spotify\n            </a>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n \n};\n\nexport default SpotifySongSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}