{"ast":null,"code":"var _jsxFileName = \"/Users/ashrafkhan/my-app/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst clientId = '367a1dd9d8fa4e7aac443fb3cd47e9fd'; // Replace with your Client ID\nconst clientSecret = '87d4c1ad132c440383be6992fb365c6c'; // Replace with your Client Secret\nconst redirectUri = \"http://localhost:3000/callback\"; // Replace with your redirect URI\nconst scopes = \"user-read-private user-read-email user-library-read\";\nconst SpotifySongSearch = () => {\n  _s();\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState('');\n  const [query, setQuery] = useState(\"taylor swift\");\n  const [songs, setSongs] = useState([]);\n\n  /* useEffect( ()=> {\n     const fetchAccessToken = async () => {\n       var url = 'https://accounts.spotify.com/api/token';\n       var options = {\n         method: 'POST',\n         headers: {\n           \"Content-Type\" : \"application/x-www-form-urlencoded\",\n         }, \n         body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n       }\n       \n       try {\n         const result = await fetch(url, options);\n         const data = await result.json();\n         setAccessToken(data.access_token);\n       } catch (error) {\n         console.error('Error fetching access token:', error);\n       }\n        \n     }\n    \n       \n      fetchAccessToken();\n   },[]);*/\n\n  const handleLogin = () => {\n    const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;\n    window.location.href = authUrl;\n  };\n  useEffect(() => {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n    if (code) {\n      fetchAccessToken(code);\n    }\n  }, []);\n  const fetchAccessToken = async code => {\n    const url = \"https://accounts.spotify.com/api/token\";\n    const bodyParams = new URLSearchParams({\n      grant_type: \"authorization_code\",\n      code: code,\n      // Authorization code from URL\n      redirect_uri: redirectUri,\n      client_id: clientId,\n      client_secret: clientSecret\n    });\n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\"\n      },\n      body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n    };\n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        const errorDetails = await response.text();\n        console.error(`Failed to fetch access token: ${response.status}`, errorDetails);\n        return;\n      }\n      const data = await response.json();\n      console.log(\"Token response data:\", data);\n      setAccessToken(data.access_token);\n      setRefreshToken(data.refresh_token);\n    } catch (error) {\n      console.error(\"Error fetching access token:\", error);\n    }\n  };\n  const refreshAccessToken = async () => {\n    try {\n      const response = await fetch(\"https://localhost:4000/spotify/refresh\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\": \"application/json\"\n        },\n        body: JSON.stringify({\n          refreshToken\n        })\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n    } catch (error) {\n      console.log(error);\n    }\n  };\n  async function SearchSong() {\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=10`;\n    const authorizationSearch = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json',\n        // Fixed incorrect 'applications/json' to 'application/json'\n        \"Authorization\": `Bearer ${accessToken}` // Added a space after 'Bearer' and used template literals for clarity\n      }\n    };\n    try {\n      const res = await fetch(url, authorizationSearch);\n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n      const data = await res.json(); // Awaited the response JSON parsing\n      setSongs(data.tracks.items);\n    } catch (error) {\n      console.error('Error fetching song:', error);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: handleLogin,\n      children: \"Login to Spotify\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Spotify Song Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"text\",\n      value: query,\n      onChange: e => setQuery(e.target.value),\n      placeholder: \"Search for a song\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: SearchSong,\n      children: \"Search\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: songs.map(song => /*#__PURE__*/_jsxDEV(\"li\", {\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          children: song.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [\"Artist: \", song.artists.map(artist => artist.name).join(\", \")]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 156,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          href: song.external_urls.spotify,\n          target: \"_blank\",\n          rel: \"noopener noreferrer\",\n          children: \"Listen on Spotify\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 157,\n          columnNumber: 13\n        }, this)]\n      }, song.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 141,\n    columnNumber: 5\n  }, this);\n};\n_s(SpotifySongSearch, \"ev9v7UW4y3n9LvqNT6UDpFnXTmc=\");\n_c = SpotifySongSearch;\nexport default SpotifySongSearch;\nvar _c;\n$RefreshReg$(_c, \"SpotifySongSearch\");","map":{"version":3,"names":["React","useState","useEffect","jsxDEV","_jsxDEV","clientId","clientSecret","redirectUri","scopes","SpotifySongSearch","_s","accessToken","setAccessToken","refreshToken","setRefreshToken","query","setQuery","songs","setSongs","handleLogin","authUrl","encodeURIComponent","window","location","href","urlParams","URLSearchParams","search","code","get","fetchAccessToken","url","bodyParams","grant_type","redirect_uri","client_id","client_secret","options","method","headers","body","response","fetch","ok","errorDetails","text","console","error","status","data","json","log","access_token","refresh_token","refreshAccessToken","JSON","stringify","SearchSong","authorizationSearch","res","Error","tracks","items","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","type","value","onChange","e","target","placeholder","map","song","name","artists","artist","join","external_urls","spotify","rel","id","_c","$RefreshReg$"],"sources":["/Users/ashrafkhan/my-app/src/App.js"],"sourcesContent":["\n\n\nimport React, { useState, useEffect } from \"react\";\n\nconst clientId = '367a1dd9d8fa4e7aac443fb3cd47e9fd'; // Replace with your Client ID\nconst clientSecret = '87d4c1ad132c440383be6992fb365c6c';// Replace with your Client Secret\nconst redirectUri = \"http://localhost:3000/callback\"; // Replace with your redirect URI\nconst scopes = \"user-read-private user-read-email user-library-read\";\n\nconst SpotifySongSearch = () => {\n  const [accessToken, setAccessToken] = useState(\"\");\n  const [refreshToken, setRefreshToken] = useState('');\n  const [query, setQuery] = useState(\"taylor swift\");\n  const [songs, setSongs] = useState([]);\n \n /* useEffect( ()=> {\n    const fetchAccessToken = async () => {\n      var url = 'https://accounts.spotify.com/api/token';\n      var options = {\n        method: 'POST',\n        headers: {\n          \"Content-Type\" : \"application/x-www-form-urlencoded\",\n        }, \n        body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n      }\n      \n      try {\n        const result = await fetch(url, options);\n        const data = await result.json();\n        setAccessToken(data.access_token);\n      } catch (error) {\n        console.error('Error fetching access token:', error);\n      }\n       \n    }\n   \n      \n\n    fetchAccessToken();\n  },[]);*/\n\n\n\n  const handleLogin = () => {\n    const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&response_type=code&redirect_uri=${encodeURIComponent(redirectUri)}&scope=${encodeURIComponent(scopes)}`;\n    window.location.href = authUrl;\n  };\n\n\n  useEffect(()=> {\n    const urlParams = new URLSearchParams(window.location.search);\n    const code = urlParams.get(\"code\");\n\n    if(code) {\n      fetchAccessToken(code);\n    }\n\n  },[]);\n\n  const fetchAccessToken = async (code) => {\n    const url = \"https://accounts.spotify.com/api/token\";\n    const bodyParams = new URLSearchParams({\n      grant_type: \"authorization_code\",\n      code: code, // Authorization code from URL\n      redirect_uri: redirectUri,\n      client_id: clientId,\n      client_secret: clientSecret,\n    });\n  \n    const options = {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded\",\n      },\n      body: `grant_type=client_credentials&client_id=${clientId}&client_secret=${clientSecret}`\n    };\n  \n    try {\n      const response = await fetch(url, options);\n      if (!response.ok) {\n        const errorDetails = await response.text();\n        console.error(`Failed to fetch access token: ${response.status}`, errorDetails);\n        return;\n      }\n      const data = await response.json();\n      console.log(\"Token response data:\", data);\n      setAccessToken(data.access_token);\n      setRefreshToken(data.refresh_token);\n    } catch (error) {\n      console.error(\"Error fetching access token:\", error);\n    }\n  };\n  \n\n  const refreshAccessToken = async () => {\n    try {\n      const response = await fetch(\"https://localhost:4000/spotify/refresh\", {\n        method: \"POST\",\n        headers: {\n          \"Content-Type\" : \"application/json\",\n        },\n        body: JSON.stringify({refreshToken}),\n      });\n      const data = await response.json();\n      setAccessToken(data.access_token);\n    } catch(error) {\n      console.log(error);\n    }\n  }\n\n\n  async function SearchSong() {\n    const url = `https://api.spotify.com/v1/search?q=${encodeURIComponent(query)}&type=track&limit=10`;\n    \n  \n    const authorizationSearch = {\n      method: 'GET',\n      headers: {\n        'Content-Type': 'application/json', // Fixed incorrect 'applications/json' to 'application/json'\n        \"Authorization\": `Bearer ${accessToken}` // Added a space after 'Bearer' and used template literals for clarity\n      }\n    };\n  \n    try {\n      const res = await fetch(url, authorizationSearch);\n  \n      if (!res.ok) {\n        throw new Error(`HTTP error! status: ${res.status}`);\n      }\n  \n      const data = await res.json(); // Awaited the response JSON parsing\n      setSongs(data.tracks.items); \n    } catch (error) {\n      console.error('Error fetching song:', error);\n    }\n\n    \n  }\n  return (\n    <div>\n      <button onClick={handleLogin}>Login to Spotify</button>\n      <h1>Spotify Song Search</h1>\n      <input\n        type=\"text\"\n        value={query}\n        onChange={(e) => setQuery(e.target.value)}\n        placeholder=\"Search for a song\"\n      />\n      <button onClick={SearchSong}>Search</button>\n\n      <ul>\n        {songs.map((song) => (\n          <li key={song.id}>\n            <p>{song.name}</p>\n            <p>Artist: {song.artists.map((artist) => artist.name).join(\", \")}</p>\n            <a href={song.external_urls.spotify} target=\"_blank\" rel=\"noopener noreferrer\">\n              Listen on Spotify\n            </a>\n          </li>\n        ))}\n      </ul>\n    </div>\n  );\n \n};\n\nexport default SpotifySongSearch;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}